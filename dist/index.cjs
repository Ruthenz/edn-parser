"use strict";function n(n,e){return void 0===n&&(n=""),void 0===e&&(e=1),n.length?"\n".concat(n.repeat(e)):""}function e(n){return void 0!==n}function r(n,e){var r=e.msg,t=e.action;if(!n)if(t)t();else if(r)throw new Error(r)}function t(n){var e=0,t=i();return function(){if(e<n.length)throw E("Expecting to end here"),new SyntaxError("EDN_ERROR_0002 Expected End of Input")}(),t;function i(){var t,a,p,v,E;u();var g=null!==(E=null!==(v=null!==(p=null!==(a=null!==(t=o())&&void 0!==t?t:function(){var r,t=e;"-"===n[e]&&(e++,s(n.slice(t,e)));if("0"===n[e])e++;else if(n[e]>="1"&&n[e]<="9")for(e++;n[e]>="0"&&n[e]<="9";)e++;if("/"===n[e])for(r=e,e++,s(n.slice(t,e));n[e]>="0"&&n[e]<="9";)e++;else if("."===n[e]){for(e++,s(n.slice(t,e));n[e]>="0"&&n[e]<="9";)e++;if("e"===n[e]||"E"===n[e])for(e++,"-"!==n[e]&&"+"!==n[e]||e++,s(n.slice(t,e));n[e]>="0"&&n[e]<="9";)e++}if(e>t){return r?Number(n.slice(t,r))/Number(n.slice(r+1,e)):Number(n.slice(t,e))}}())&&void 0!==a?a:function(){if("true"===n.slice(e,e+4))return e+=4,!0;if("false"===n.slice(e,e+5))return e+=5,!1}())&&void 0!==p?p:function(){var r={"[":"]","(":")"},t=n[e],o=r[t];if(o){e++,u();for(var c=[],a=!0;e<n.length&&n[e]!==o;){a||u();var l=i();c.push(l),a=!1}return f(o),e++,c}}())&&void 0!==v?v:function(){var t;if("{"===n[e]){e++,u();for(var a={},s=!0;e<n.length&&"}"!==n[e];){s||u();var p=null!==(t=o())&&void 0!==t?t:c();r(void 0!==p,{action:l}),u();var v=i();a[p]=v,s=!1}return f("}"),e++,a}}())&&void 0!==E?E:function(){var r="nil";if(n.slice(e,e+r.length)===r)return e+=r.length,null}();return u(),g}function o(){if('"'===n[e]){e++;for(var r="";e<n.length&&'"'!==n[e];){if("\\"===n[e]){var t=n[e+1];'"'===t||"\\"===t||"/"===t||"b"===t||"f"===t||"n"===t||"r"===t||"t"===t?(r+=t,e++):"u"===t?a(n[e+2])&&a(n[e+3])&&a(n[e+4])&&a(n[e+5])?(r+=String.fromCharCode(parseInt(n.slice(e+2,e+6),16)),e+=5):(e+=2,v(r)):p(r)}else r+=n[e];e++}return f('"'),e++,r}}function c(){if(":"===n[e]){e++;for(var r="";e<n.length&&" "!==n[e];)r+=n[e],e++;return f(" "),e++,r}}function a(n){return n>="0"&&n<="9"||n.toLowerCase()>="a"&&n.toLowerCase()<="f"}function u(){for(var r=[" ",",","\n","\t","\r"];r.includes(n[e]);)e++}function f(r){if(e===n.length)throw E("Expecting a `".concat(r,"` here")),new SyntaxError("EDN_ERROR_0001 Unexpected End of Input")}function l(){throw E('Expecting object key here\n\nFor example:\n{ "foo" "bar" }\n{ :foo "bar" }\n  ^^^^^'),new SyntaxError("EDN_ERROR_0003 Expecting EDN Key")}function s(r){if(!(n[e]>="0"&&n[e]<="9"))throw E("EDN_ERROR_0004 Expecting a digit here\n\nFor example:\n".concat(r,"5\n").concat(" ".repeat(r.length),"^")),new SyntaxError("EDN_ERROR_0005 Expecting a digit")}function p(n){throw E('EDN_ERROR_0006 Expecting escape character\n\nFor example:\n"'.concat(n,'\\n"\n').concat(" ".repeat(n.length+1),'^^\nList of escape characters are: \\", \\\\, \\/, \\b, \\f, \\n, \\r, \\t, \\u')),new SyntaxError("EDN_ERROR_0007 Expecting an escape character")}function v(n){throw E('Expect escape unicode\n\nFor example:\n"'.concat(n,"\\u0123\n").concat(" ".repeat(n.length+1),"^^^^^^")),new SyntaxError("EDN_ERROR_0008 Expecting an escape unicode")}function E(r){var t=Math.max(0,e-10),i=t>0,o=e-t+(i?4:0),c=[(i?"... ":"")+n.slice(t,e+1)," ".repeat(o)+"^"," ".repeat(o)+r].join("\n");console.log(c)}}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function r(){}return r.parse=function(n){return t(n)},r.stringify=function(r,t){return function(r,t){var i=(void 0===t?{spaces:0}:t).spaces,o=void 0===i?0:i,c=" ".repeat(o);return function r(t,i){void 0===i&&(i=1);var a=typeof t;if(void 0!==t){if(null===t)return"nil";if("number"===a||"boolean"===a)return"".concat(t);if("string"===a)return'"'.concat(t,'"');var u=n(c,i),f=n(c,i-1),l=o?u:" ";if(Array.isArray(t))return t.length?["[",u,t.filter(e).map((function(n){return r(n,i+1)})).join(l),f,"]"].join(""):"[]";var s=Object.entries(t).filter((function(n){return n[0],e(n[1])})).map((function(n){var e=n[0],t=n[1];return":".concat(e," ").concat(r(t,i+1))}));return["{",u,s.join(l),f,"}"].join("")}}(r)}(r,t)},r.compress=function(n){return n.trim().replaceAll("\n","").replace(/\s\s+/g," ").replace(/(\(|\))(?=([^"]*"[^"]*")*[^"]*$)/g,(function(n){return"("===n?"[":"]"})).replace(/({ | }|\[ | \])(?=([^"]*"[^"]*")*[^"]*$)/g,(function(n){return n.trim()}))},r}();exports.EDN=i,exports.default=i;
